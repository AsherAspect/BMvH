version: '0.1'
services:
  azurite:
    image: mcr.microsoft.com/azure-storage/azurite
    container_name: bmvh_azurite
    hostname: azurite
    restart: always
    command: >
      azurite --oauth basic
      --location /var/opt/weaviate
      --debug /var/opt/weaviate/debug.log
      --blobHost 0.0.0.0 --queueHost 0.0.0.0 --tableHost 0.0.0.0 --loose
    ports:
      - "10000:10000"
      - "10001:10001"
      - "10002:10002" 
    volumes:
      - ./azurite:/var/opt/weaviate



  weaviate:
    command:
    - --host
    - 0.0.0.0
    - --port
    - '8080'
    - --scheme
    - http
    image: cr.weaviate.io/semitechnologies/weaviate:1.34.0
    container_name: bmvh_weaviate
    ports:
    - 8080:8080
    - 50051:50051
    volumes:
      - ./weaviate:/var/lib/weaviate
    restart: on-failure:0
    environment:
      # SSL_CERT_FILE: 'C:\Users\Asher\OneDrive - Aspect ICT\Documenten\_Projects\HSG\Python\HSG\.venv\Lib\site-packages\certifi\cacert.pem'
      QUERY_DEFAULTS_LIMIT: 25
      AUTHENTICATION_ANONYMOUS_ACCESS_ENABLED: 'true'
      PERSISTENCE_DATA_PATH: '/var/lib/weaviate'
      CLUSTER_HOSTNAME: 'node1'

  

  sql:
    image: mcr.microsoft.com/mssql/server:2022-latest
    container_name: bmvh_sql
    user: root
    restart: always
    environment:
      ACCEPT_EULA: "Y"
      MSSQL_SA_PASSWORD: ${SQL_PASSWORD}
    ports:
      - "1433:1433"
    volumes:
      - ./sql:/var/opt/mssql/data

volumes:
  azurite:
  weaviate:
  sql: